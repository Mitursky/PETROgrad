(this.webpackJsonpclose=this.webpackJsonpclose||[]).push([[0],{315:function(e,t,n){},353:function(e,t,n){},356:function(e,t){},358:function(e,t){},402:function(e,t){},404:function(e,t){},432:function(e,t){},434:function(e,t){},435:function(e,t){},440:function(e,t){},442:function(e,t){},448:function(e,t){},450:function(e,t){},469:function(e,t){},481:function(e,t){},484:function(e,t){},554:function(e,t,n){},555:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(83),i=n.n(a),o=(n(315),n(17)),s=n(13),l=n(41),u=n.n(l),r=n(84),b=n(42),d=n.n(b),j=n(73),f=n.n(j),p=n(557);function m(e){var t=e.src,n=e.width,c=void 0===n?50:n,a=e.height,i=void 0===a?50:a,o=e.func,s=void 0===o?function(){}:o,l=e.lat,u=void 0===l?59.93:l,r=e.lng,b=void 0===r?30.19:r,d=e.className,j=void 0===d?"marker":d,p=e.map,m=e.arg,g=e.setInfo,O=e.name,h=e.subtitle,x=e.text,v=document.createElement("div");v.className=j,v.style.backgroundImage="url(".concat(t,")"),v.style.width="".concat(c,"px"),v.style.height="".concat(i,"px"),v.style.backgroundSize="100%",v.addEventListener("click",(function(){console.log("click"),"buildings"==j&&g({name:O,subtitle:h,text:x,src:t}),s&&s(m)})),new f.a.Marker(v).setLngLat([b,u]).addTo(p)}var g,O=n(8);function h(){var e=document.getElementById("but");function t(e){var t=document.getElementById(e);t&&d.a.animate(t,{opacity:"div"==e?.7:.5,scale:1},{type:d.a.easeInOut,duration:500,frequency:166})}e&&d.a.animate(e,{translateY:0},{type:d.a.spring,duration:2e3,frequency:166}),t("div"),t("div2")}f.a.accessToken="pk.eyJ1IjoibWl0dXJza3kiLCJhIjoiY2t1Mm1rODBoMnNlejJzcW56MnJ6dmFzOSJ9.czgQtgAZPb81wq1ahUZmgQ";var x,v=function(e){e.setActivePanel,e.socket,e.theme;var t=e.setModal,n=e.map,a=e.lng,i=e.lat,l=e.zoom,b=(e.info,e.setInfo),d=Object(c.useState)([]),j=Object(o.a)(d,2),x=(j[0],j[1],Object(c.useState)(!0)),v=Object(o.a)(x,2),w=(v[0],v[1]),y=Object(c.useState)(250),S=Object(o.a)(y,2),I=(S[0],S[1],Object(c.useState)(null)),k=Object(o.a)(I,2),A=k[0],W=k[1],T=Object(c.useRef)(null);return Object(c.useEffect)((function(){n.current||(n.current=new f.a.Map({container:T.current,style:"mapbox://styles/mapbox/streets-v11",center:[a,i],zoom:l,maxZoom:15,minZoom:10}),m({src:"https://guideshop.ru/wp-content/uploads/2020/11/original.jpg",className:"buildings",map:n.current,func:t,arg:"info",name:"\u0414\u0432\u043e\u0440\u0435\u0446 \u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",subtitle:"\u041f\u043e\u0441\u0442\u0440\u043e\u0435\u043d \u0432 1234\u0433.",text:"\u041e\u0447\u0435\u043d\u044c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u0434\u0432\u043e\u0440\u0435\u0446, \u041f\u0438\u0442\u0435\u0440 \u043a\u043b\u0430\u0441\u0441\u043d\u044b\u0439 \u0433\u043e\u0440\u043e\u0434, \u0434\u043e\u0436\u0434\u0438\n      \u0432 \u043d\u0451\u043c \u043c\u0435\u043d\u044f \u0441\u043e\u0432\u0441\u0435\u043c \u043d\u0435 \u0431\u0435\u0441\u043f\u043e\u043a\u043e\u044f\u0442. \u042d\u0442\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u0440\u044b\u0431\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442. \u0420\u044b\u0431\u044b - \u043b\u0443\u0447\u0448\u0438\u0435. \n      \u041e\u0447\u0435\u043d\u044c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u0434\u0432\u043e\u0440\u0435\u0446, \u041f\u0438\u0442\u0435\u0440 \u043a\u043b\u0430\u0441\u0441\u043d\u044b\u0439 \u0433\u043e\u0440\u043e\u0434, \u0434\u043e\u0436\u0434\u0438\n      \u0432 \u043d\u0451\u043c \u043c\u0435\u043d\u044f \u0441\u043e\u0432\u0441\u0435\u043c \u043d\u0435 \u0431\u0435\u0441\u043f\u043e\u043a\u043e\u044f\u0442. \u042d\u0442\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u0440\u044b\u0431\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442. ",setInfo:b}),m(Object(r.a)({src:"https://sun9-20.userapi.com/t9YgK6pARK4PHv6ESD3OsUL0RIqiWe5QFM49Yg/xVdW7mK6Abs.jpg",className:"buildings",map:n.current,lng:30.23,lat:59.93,setInfo:b,func:t,arg:"info",name:"\u041f\u0430\u043c\u044f\u0442\u043d\u0438\u043a \u043a\u0443\u043b\u044c\u0442\u0443\u0440\u044b",subtitle:"\u041f\u043e\u0441\u0442\u0440\u043e\u0435\u043d \u0432 1783\u0433.",text:"\u041e\u0447\u0435\u043d\u044c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u043f\u0430\u043c\u044f\u0442\u043d\u0438\u043a, \u041f\u0438\u0442\u0435\u0440 \u043a\u043b\u0430\u0441\u0441\u043d\u044b\u0439 \u0433\u043e\u0440\u043e\u0434, \u0434\u043e\u0436\u0434\u0438\n      \u0432 \u043d\u0451\u043c \u043c\u0435\u043d\u044f \u0441\u043e\u0432\u0441\u0435\u043c \u043d\u0435 \u0431\u0435\u0441\u043f\u043e\u043a\u043e\u044f\u0442. \u042d\u0442\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u0440\u044b\u0431\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442. \u0420\u044b\u0431\u044b - \u043b\u0443\u0447\u0448\u0438\u0435. \n      \u041e\u0447\u0435\u043d\u044c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u043f\u0430\u043c\u044f\u0442\u043d\u0438\u043a, \u041f\u0438\u0442\u0435\u0440 \u043a\u043b\u0430\u0441\u0441\u043d\u044b\u0439 \u0433\u043e\u0440\u043e\u0434, \u0434\u043e\u0436\u0434\u0438\n      \u0432 \u043d\u0451\u043c \u043c\u0435\u043d\u044f \u0441\u043e\u0432\u0441\u0435\u043c \u043d\u0435 \u0431\u0435\u0441\u043f\u043e\u043a\u043e\u044f\u0442. \u042d\u0442\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u0440\u044b\u0431\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442. "},"setInfo",b)))})),Object(c.useEffect)((function(){u.a.subscribe((function(e){var t,n=e.detail,c=n.type;n.data;"VKWebAppGeodataFailed"==c&&(w(!1),t="\u0412\u043a\u043b\u044e\u0447\u0438 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043c\u044b \u0432\u0441\u0451 \u0440\u0430\u0432\u043d\u043e \u0437\u043d\u0430\u0435\u043c \u0433\u0434\u0435 \u0442\u044b.",A||W(Object(O.jsx)(s.l,{onClose:function(){return W(null)},before:Object(O.jsx)(s.c,{size:24,children:Object(O.jsx)(p.a,{width:24,height:24})}),children:t})),Date.now()-g<500?setTimeout((function(){h()}),500-(Date.now()-g)):h())}))}),[]),Object(O.jsxs)(s.k,{id:"main",children:[Object(O.jsx)("div",{ref:T,className:"map-container",style:{height:window.innerHeight+"px"}}),A]})},w=(n(328),n(329),n(74),n(353),n(354),n(502),function(e){var t=e.modal,n=e.setModal,a=(e.socket,e.text),i=(e.setText,e.platformSign,e.info),l=(Object(s.p)(),Object(c.useState)([])),u=Object(o.a)(l,2),r=(u[0],u[1],Object(c.useState)()),b=Object(o.a)(r,2),d=(b[0],b[1],Object(c.useState)({})),j=Object(o.a)(d,2),f=j[0];j[1];return window.text=a,window.user=f,Object(c.useEffect)((function(){}),[]),Object(O.jsx)(s.j,{activeModal:t,children:Object(O.jsxs)(s.h,{id:"info",onClose:function(){return n(null)},header:Object(O.jsx)(s.i,{left:Object(O.jsxs)("body",{style:{marginTop:"145px"},children:[Object(O.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",marginTop:"150px",marginLeft:"-4px",boxShadow:"0px -34px 47px -5px rgba(255, 255, 255, 1) inset"}}),Object(O.jsx)("img",{src:i.src,height:"200px",width:window.innerWidth+"px",style:{borderRadius:"16px 16px 0px 0px",objectFit:"cover",marginLeft:"-4px"}})]})}),children:[Object(O.jsx)("div",{style:{height:"145px"}}),Object(O.jsx)(s.e,{children:Object(O.jsxs)(s.f,{children:[Object(O.jsx)(s.n,{level:"1",weight:"semibold",style:{marginBottom:4},children:i.name}),Object(O.jsx)(s.g,{weight:"regular",style:{marginBottom:16,color:"#6d6d6d"},children:i.subtitle}),Object(O.jsx)(s.m,{weight:"regular",style:{marginBottom:16,fontSize:"20px",lineHeight:"24px"},children:i.text})]})})]})})});n(554);u.a.send("VKWebAppInit"),console.log("production");var y=function(){var e=Object(c.useState)("main"),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)("white"),l=Object(o.a)(i,2),r=l[0],b=l[1],d=Object(c.useState)({photo_200:"",name:"",id:0}),j=Object(o.a)(d,2),f=j[0],p=j[1],g=Object(c.useState)(null),h=Object(o.a)(g,2),y=h[0],S=h[1],I=Object(c.useState)(""),k=Object(o.a)(I,2),A=k[0],W=k[1],T=Object(c.useState)({lat:null,long:null}),K=Object(o.a)(T,2),M=K[0],z=K[1],E=Object(c.useState)(30.19),L=Object(o.a)(E,2),V=L[0],B=(L[1],Object(c.useState)(59.93)),F=Object(o.a)(B,2),G=F[0],J=(F[1],Object(c.useState)(11)),R=Object(o.a)(J,2),C=R[0],N=(R[1],Object(c.useState)({})),P=Object(o.a)(N,2),D=P[0],U=P[1],_=Object(c.useRef)(null),q=window.location.search.slice(1).split("platform=")[1].split("&")[0];return console.log(M,f),(null===f||void 0===f?void 0:f.first_name)&&(null===M||void 0===M?void 0:M.lat)&&_&&m({src:f.photo_200,className:"me",map:_.current,lng:M.long,lat:M.lat}),Object(c.useEffect)((function(){u.a.subscribe((function(e){var t=e.detail,n=t.type,c=t.data;(console.log(n),"VKWebAppUpdateConfig"===n)&&(document.createAttribute("scheme").value=c.scheme?c.scheme:"client_light",b(c.scheme&&"bright_light"==c.scheme?"white":"black"),u.a.send("VKWebAppGetUserInfo"),u.a.send("VKWebAppGetGeodata"));"VKWebAppGeodataResult"===n&&(z(c),_.current.flyTo({center:[c.long,c.lat]})),"VKWebAppGetGeodataResult"===n&&(z(c),_.current.flyTo({center:[c.long,c.lat]})),"VKWebAppGetUserInfoResult"===n&&p(c)}))}),[]),Object(O.jsx)(s.o,{activePanel:n,modal:Object(O.jsx)(w,{modal:y,socket:x,setModal:S,text:A,info:D,setText:W,platformSign:q}),children:Object(O.jsx)(v,{text:A,setText:W,theme:r,lng:V,lat:G,zoom:C,info:D,setInfo:U,socket:x,setActivePanel:a,id:"main",setModal:S,map:_})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,558)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),i(e),o(e)}))};i.a.render(Object(O.jsx)(s.d,{children:Object(O.jsx)(s.a,{children:Object(O.jsx)(s.b,{children:Object(O.jsx)(y,{})})})}),document.getElementById("root")),S()}},[[555,1,2]]]);
//# sourceMappingURL=main.ce780bad.chunk.js.map