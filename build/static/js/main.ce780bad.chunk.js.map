{"version":3,"sources":["functions.js","panels/main_panel.js","App.js","modals/chat.js","reportWebVitals.js","index.js"],"names":["createMarker","src","width","height","func","lat","lng","className","map","arg","setInfo","name","subtitle","text","el","document","createElement","style","backgroundImage","backgroundSize","addEventListener","console","log","mapboxgl","Marker","setLngLat","addTo","startAnimation","animate_button_back","getElementById","eldiv","id","dynamics","animate","opacity","scale","type","easeInOut","duration","frequency","translateY","spring","accessToken","socket","MainPanel","setActivePanel","theme","setModal","zoom","info","useState","setLoading","snackbar","setSnackbar","mapContainer","useRef","useEffect","current","Map","container","center","maxZoom","minZoom","bridge","subscribe","detail","data","onClose","before","size","Date","now","setTimeout","ref","window","innerHeight","ModalChat","modal","setText","platformSign","usePlatform","user","activeModal","header","left","marginTop","position","marginLeft","boxShadow","innerWidth","borderRadius","objectFit","level","weight","marginBottom","color","fontSize","lineHeight","send","process","App","activePanel","setTheme","photo_200","setUser","long","geodata","setGeodata","location","search","slice","split","first_name","createAttribute","value","scheme","flyTo","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render"],"mappings":"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","file":"static/js/main.ce780bad.chunk.js","sourcesContent":["import mapboxgl from \"mapbox-gl\";\n\nfunction createMarker({\n  src,\n  width = 50,\n  height = 50,\n  func = () => {},\n  lat = 59.93,\n  lng = 30.19,\n  className = \"marker\",\n  map,\n  arg,\n  setInfo,\n  name,\n  subtitle,\n  text,\n}) {\n  var el = document.createElement(\"div\");\n  el.className = className;\n  el.style.backgroundImage = `url(${src})`;\n  el.style.width = `${width}px`;\n  el.style.height = `${height}px`;\n  el.style.backgroundSize = \"100%\";\n\n  el.addEventListener(\"click\", function () {\n    console.log(\"click\");\n    if (className == \"buildings\") {\n      setInfo({ name, subtitle, text, src });\n    }\n    if (func) {\n      func(arg);\n    }\n  });\n\n  new mapboxgl.Marker(el).setLngLat([lng, lat]).addTo(map);\n}\n\nexport { createMarker };\n","import { animate, Search } from \"@vkontakte/vkui\";\nimport { useEffect, useState, useRef } from \"react\";\nimport {} from \"@vkontakte/icons\";\nimport React from \"react\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport dynamics from \"dynamics.js\";\nimport {\n  Panel,\n  PanelHeader,\n  Group,\n  HorizontalScroll,\n  Avatar,\n  HorizontalCell,\n  Header,\n  FixedLayout,\n  Spinner,\n  TabsItem,\n  Tabs,\n  Snackbar,\n  Placeholder,\n} from \"@vkontakte/vkui\";\nimport mapboxgl from \"mapbox-gl\";\nimport {\n  Icon20CancelCircleFillRed,\n  Icon28LocationMapOutline,\n  Icon36AdvertisingOutline,\n} from \"@vkontakte/icons\";\nimport { createMarker } from \"../functions\";\n\nmapboxgl.accessToken =\n  \"pk.eyJ1IjoibWl0dXJza3kiLCJhIjoiY2t1Mm1rODBoMnNlejJzcW56MnJ6dmFzOSJ9.czgQtgAZPb81wq1ahUZmgQ\";\nlet startAnimation;\nfunction animate_button_back() {\n  let el = document.getElementById(\"but\");\n  if (el) {\n    dynamics.animate(\n      el,\n      {\n        translateY: 0,\n      },\n      {\n        type: dynamics.spring,\n        duration: 2000,\n        frequency: 166,\n      }\n    );\n  }\n  eldiv(\"div\");\n  eldiv(\"div2\");\n  function eldiv(id) {\n    let el = document.getElementById(id);\n    if (el) {\n      dynamics.animate(\n        el,\n        {\n          opacity: id == \"div\" ? 0.7 : 0.5,\n          scale: 1,\n        },\n        {\n          type: dynamics.easeInOut,\n          duration: 500,\n          frequency: 166,\n        }\n      );\n    }\n  }\n}\nfunction animate_button() {\n  let el = document.getElementById(\"but\");\n  if (el) {\n    dynamics.animate(\n      el,\n      {\n        translateY: -100,\n      },\n      {\n        type: dynamics.easeInOut,\n        duration: 350,\n      }\n    );\n  }\n  eldiv(\"div\");\n  eldiv(\"div2\");\n\n  function eldiv(id) {\n    let el = document.getElementById(id);\n    if (el) {\n      dynamics.animate(\n        el,\n        {\n          opacity: 0,\n          scale: 1.5,\n        },\n        {\n          type: dynamics.easeInOut,\n          duration: 400,\n        }\n      );\n    }\n  }\n}\n\nconst MainPanel = ({\n  setActivePanel,\n  socket,\n  theme,\n  setModal,\n  map,\n  lng,\n  lat,\n  zoom,\n  info,\n  setInfo,\n}) => {\n  const [peoples, SetPeoples] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState(250);\n  const [snackbar, setSnackbar] = useState(null);\n\n  //maps\n  const mapContainer = useRef(null);\n\n  const normalize_distance = (distance) => {\n    let res = \"\";\n    distance = distance * 1000;\n    if (distance > 1000) {\n      distance /= 1000;\n      res = distance.toFixed(1) + \" км\";\n    } else {\n      if (distance < 10) {\n        res = \"Рядом\";\n      } else {\n        res = distance.toFixed(0) + \" м\";\n      }\n    }\n    return res;\n  };\n\n  function ErrorBar(text) {\n    if (snackbar) return;\n    setSnackbar(\n      <Snackbar\n        onClose={() => setSnackbar(null)}\n        before={\n          <Avatar size={24}>\n            <Icon20CancelCircleFillRed width={24} height={24} />\n          </Avatar>\n        }\n      >\n        {text}\n      </Snackbar>\n    );\n  }\n\n  const search = () => {\n    animate_button();\n    setLoading(true);\n    startAnimation = Date.now();\n  };\n  //map\n  useEffect(() => {\n    if (map.current) return; // initialize map only once\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: \"mapbox://styles/mapbox/streets-v11\",\n      center: [lng, lat],\n      zoom: zoom,\n      maxZoom: 15,\n      minZoom: 10,\n    });\n\n    createMarker({\n      src: \"https://guideshop.ru/wp-content/uploads/2020/11/original.jpg\",\n      className: \"buildings\",\n      map: map.current,\n      func: setModal,\n      arg: \"info\",\n      name: \"Дворец Название\",\n      subtitle: \"Построен в 1234г.\",\n      text: `Очень интересный текст описывающий дворец, Питер классный город, дожди\n      в нём меня совсем не беспокоят. Это просто рыбный текст. Рыбы - лучшие. \n      Очень интересный текст описывающий дворец, Питер классный город, дожди\n      в нём меня совсем не беспокоят. Это просто рыбный текст. `,\n      setInfo: setInfo,\n    });\n    createMarker({\n      src: \"https://sun9-20.userapi.com/t9YgK6pARK4PHv6ESD3OsUL0RIqiWe5QFM49Yg/xVdW7mK6Abs.jpg\",\n      className: \"buildings\",\n      map: map.current,\n      lng: 30.23,\n      lat: 59.93,\n      setInfo: setInfo,\n      func: setModal,\n      arg: \"info\",\n      name: \"Памятник культуры\",\n      subtitle: \"Построен в 1783г.\",\n      text: `Очень интересный текст описывающий памятник, Питер классный город, дожди\n      в нём меня совсем не беспокоят. Это просто рыбный текст. Рыбы - лучшие. \n      Очень интересный текст описывающий памятник, Питер классный город, дожди\n      в нём меня совсем не беспокоят. Это просто рыбный текст. `,\n      setInfo: setInfo,\n    });\n  });\n\n  useEffect(() => {\n    bridge.subscribe(({ detail: { type, data } }) => {\n      if (type == \"VKWebAppGeodataFailed\") {\n        setLoading(false);\n        ErrorBar(\"Включи местоположение, мы всё равно знаем где ты.\");\n        if (Date.now() - startAnimation < 500) {\n          setTimeout(() => {\n            animate_button_back();\n          }, 500 - (Date.now() - startAnimation));\n        } else {\n          animate_button_back();\n        }\n      }\n    });\n  }, []);\n\n  return (\n    <Panel id=\"main\">\n      <div\n        ref={mapContainer}\n        className=\"map-container\"\n        style={{ height: window.innerHeight + \"px\" }}\n      />\n      {/*\n    <PanelHeader>Around</PanelHeader>\n      {peoples.length ? (\n        <Group header={<Header mode=\"secondary\">Люди рядом</Header>}>\n          <HorizontalScroll\n            showArrows={true}\n            getScrollToLeft={(i) => i - 120}\n            getScrollToRight={(i) => i + 120}\n          >\n            <div style={{ display: \"flex\" }}>\n              <HorizontalCell\n                onClick={() => {}}\n                subtitle={\"Чатик\"}\n                header={\"Общий\"}\n              >\n                <Avatar\n                  size={56}\n                  style={{\n                    backgroundColor:\n                      theme == \"white\" ? \"var(--accent)\" : \"white\",\n                  }}\n                  onClick={() => {\n                    setModal(\"chat\");\n                  }}\n                >\n                  <Icon28LocationMapOutline\n                    onClick={() => {}}\n                    fill=\"var(--button_primary_foreground)\"\n                    width={32}\n                    height={32}\n                  />\n                </Avatar>\n              </HorizontalCell>\n\n              {peoples.map((item) => {\n                return (\n                  <HorizontalCell\n                    onClick={() => {\n                      let a = document.createElement(\"a\");\n                      Object.assign(a, {\n                        href: \"https://vk.com/id\" + item._id,\n                        target: \"_blank\",\n                      });\n                      a.click();\n                    }}\n                    subtitle={normalize_distance(item.distance)}\n                    key={item.id}\n                    header={`${item.name.split(\" \")[0]}`}\n                  >\n                    <Avatar size={56} src={item.photo_200} />\n                  </HorizontalCell>\n                );\n              })}\n            </div>\n          </HorizontalScroll>\n        </Group>\n      ) : (\n        <Placeholder\n          stretched\n          style={{ pointerEvents: \"none\" }}\n          icon={\n            <Icon36AdvertisingOutline\n              fill=\"var(--accent)\"\n              width={56}\n              height={56}\n            />\n          }\n        >\n          Похоже, все куда-то ушли :(\n        </Placeholder>\n      )}\n\n      <div\n        ref={mapContainer}\n        className=\"map-container\"\n        style={{ height: \"600px\" }}\n      />\n\n      <FixedLayout filled vertical=\"bottom\">\n        <div\n          id=\"but\"\n          style={{\n            width: \"80px\",\n            height: \"80px\",\n            zIndex: \"3\",\n            marginLeft: \"-40px\",\n            marginTop: \"15px\",\n            left: \"50%\",\n            position: \"absolute\",\n            backgroundColor: theme == \"white\" ? \"var(--accent)\" : \"white\",\n            borderRadius: \"1000px\",\n          }}\n        >\n          <body>\n            {loading ? (\n              <Spinner\n                size=\"medium\"\n                style={{\n                  color: \"var(--button_primary_foreground)\",\n                  marginTop: \"25px\",\n                }}\n              />\n            ) : (\n              <Icon28LocationMapOutline\n                onClick={() => {\n                  bridge.send(\"VKWebAppGetGeodata\");\n                  search();\n                }}\n                fill=\"var(--button_primary_foreground)\"\n                width={50}\n                height={50}\n                style={{ marginTop: \"15px\", marginLeft: \"15px\" }}\n              />\n            )}\n          </body>\n        </div>\n        <div\n          id=\"div\"\n          style={{\n            width: \"95px\",\n            height: \"95px\",\n            opacity: \"0.7\",\n            zIndex: \"2\",\n            marginLeft: \"-47.5px\",\n            marginTop: \"7.5px\",\n            position: \"absolute\",\n            left: \"50%\",\n            backgroundColor: theme == \"white\" ? \"var(--accent)\" : \"white\",\n            borderRadius: \"1000px\",\n          }}\n        ></div>\n        <div\n          id=\"div2\"\n          style={{\n            width: \"110px\",\n            height: \"110px\",\n            marginLeft: \"-55px\",\n            left: \"50%\",\n            position: \"relative\",\n            marginBottom: \"53px\",\n            backgroundColor: theme == \"white\" ? \"var(--accent)\" : \"white\",\n            opacity: \"0.5\",\n            zIndex: \"1\",\n            borderRadius: \"1000px\",\n          }}\n        ></div>\n\n        <Group style={{ marginTop: \"-30px\", marginBottom: \"8px\" }}>\n          <Tabs\n            mode=\"buttons\"\n            style={{\n              left: \"50%\",\n              marginLeft: \"-160px\",\n              position: \"relative\",\n            }}\n          >\n            <TabsItem\n              onClick={() => {\n                setActiveTab(250);\n                search();\n                socket.emit(\"geo\", { scan_distance: 250 });\n              }}\n              selected={activeTab === 250}\n            >\n              250 м\n            </TabsItem>\n            <TabsItem\n              onClick={() => {\n                setActiveTab(1000);\n                search();\n                socket.emit(\"geo\", { scan_distance: 1000 });\n              }}\n              selected={activeTab === 1000}\n            >\n              1 км\n            </TabsItem>\n            <TabsItem\n              onClick={() => {\n                setActiveTab(10000);\n                search();\n                socket.emit(\"geo\", { scan_distance: 10000 });\n              }}\n              selected={activeTab === 10000}\n            >\n              10 км\n            </TabsItem>\n            <TabsItem\n              onClick={() => {\n                setActiveTab(100000);\n                search();\n                socket.emit(\"geo\", { scan_distance: 100000 });\n              }}\n              selected={activeTab === 100000}\n            >\n              100 км\n            </TabsItem>\n          </Tabs>\n        </Group>\n      </FixedLayout>*/}\n      {snackbar}\n    </Panel>\n  );\n};\n\nexport default MainPanel;\n","import {} from \"@vkontakte/vkui\";\nimport { useState, useEffect, useRef } from \"react\";\nimport {} from \"@vkontakte/icons\";\nimport React from \"react\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport MainPanel from \"./panels/main_panel.js\";\nimport { View } from \"@vkontakte/vkui\";\nimport \"@vkontakte/vkui/dist/vkui.css\";\nimport { io } from \"socket.io-client\";\nimport { ModalChat } from \"./modals/chat.js\";\nimport { createMarker } from \"./functions.js\";\nimport \"./styles.css\";\nbridge.send(\"VKWebAppInit\");\nlet socket;\nconsole.log(process.env.NODE_ENV);\n\nfunction App() {\n  const [activePanel, setActivePanel] = useState(\"main\");\n  const [theme, setTheme] = useState(\"white\");\n  const [user, setUser] = useState({ photo_200: \"\", name: \"\", id: 0 });\n  const [modal, setModal] = useState(null);\n  const [text, setText] = useState(\"\");\n  const [geodata, setGeodata] = useState({ lat: null, long: null });\n\n  const [lng, setLng] = useState(30.19);\n  const [lat, setLat] = useState(59.93);\n  const [zoom, setZoom] = useState(11);\n\n  const [info, setInfo] = useState({});\n\n  const map = useRef(null);\n\n  const platformSign = window.location.search\n    .slice(1)\n    .split(\"platform=\")[1]\n    .split(\"&\")[0];\n\n  function userRedraw() {\n    console.log(geodata, user);\n    if (!user?.first_name || !geodata?.lat || !map) return;\n    createMarker({\n      src: user.photo_200,\n      className: \"me\",\n      map: map.current,\n      lng: geodata.long,\n      lat: geodata.lat,\n    });\n  }\n  userRedraw();\n\n  useEffect(() => {\n    bridge.subscribe(({ detail: { type, data } }) => {\n      console.log(type);\n      if (type === \"VKWebAppUpdateConfig\") {\n        const schemeAttribute = document.createAttribute(\"scheme\");\n        schemeAttribute.value = data.scheme ? data.scheme : \"client_light\";\n        setTheme(\n          data.scheme && data.scheme == \"bright_light\" ? \"white\" : \"black\"\n        );\n        // document.body.attributes.setNamedItem(schemeAttribute);\n        bridge.send(\"VKWebAppGetUserInfo\");\n        bridge.send(\"VKWebAppGetGeodata\");\n      }\n\n      if (type === \"VKWebAppGeodataResult\") {\n        setGeodata(data);\n        map.current.flyTo({\n          center: [data.long, data.lat],\n        });\n      }\n      if (type === \"VKWebAppGetGeodataResult\") {\n        setGeodata(data);\n        map.current.flyTo({\n          center: [data.long, data.lat],\n        });\n      }\n      if (type === \"VKWebAppGetUserInfoResult\") {\n        setUser(data);\n      }\n    });\n  }, []);\n\n  return (\n    <View\n      activePanel={activePanel}\n      modal={\n        <ModalChat\n          modal={modal}\n          socket={socket}\n          setModal={setModal}\n          text={text}\n          info={info}\n          setText={setText}\n          platformSign={platformSign}\n        />\n      }\n    >\n      <MainPanel\n        text={text}\n        setText={setText}\n        theme={theme}\n        lng={lng}\n        lat={lat}\n        zoom={zoom}\n        info={info}\n        setInfo={setInfo}\n        socket={socket}\n        setActivePanel={setActivePanel}\n        id=\"main\"\n        setModal={setModal}\n        map={map}\n      />\n    </View>\n  );\n}\n\nexport default App;\n","import {\n  ModalPageHeader,\n  PanelHeaderClose,\n  Div,\n  ModalPage,\n  ANDROID,\n  IOS,\n  ModalRoot,\n  usePlatform,\n  VKCOM,\n  Text,\n  Headline,\n  Avatar,\n  Group,\n  Title,\n} from \"@vkontakte/vkui\";\nimport styled from \"styled-components\";\nimport { useEffect, useState, Fragment } from \"react\";\nimport { Icon24Cancel, Icon24Done } from \"@vkontakte/icons\";\nimport React from \"react\";\nimport \"../css/ModalRoot.css\";\nimport { Socket } from \"socket.io\";\nimport { tSEnumDeclaration } from \"@babel/types\";\n\nconst MessageCell = ({ text, time, our, name, photo_200 }) => {\n  const style = {\n    borderRadius: \"18px\",\n    margin: \"12px\",\n    padding: \"7px 12px\",\n    color: \"black\",\n    whiteSpace: \"pre-wrap\",\n    width: \"100%\",\n  };\n  const styleOur = {\n    ...style,\n    background: \"#CCE4FF\",\n    marginLeft: \"20vw\",\n  };\n  const styleNotOur = {\n    ...style,\n    background: \"#EBEDF0\",\n    marginRight: \"20vw\",\n  };\n\n  const unixTime = new Date(time);\n  const hours = \"0\" + unixTime.getHours();\n  const minutes = \"0\" + unixTime.getMinutes();\n\n  return (\n    <body style={{ display: \"flex\", alignItems: \"flex-end\" }}>\n      <div style={our ? styleOur : styleNotOur}>\n        {text}{\" \"}\n        <div style={{ fontSize: \"12px\", textAlign: \"right\" }}>\n          {hours.substr(-2)}:{minutes.substr(-2)}\n        </div>\n      </div>\n      <Avatar\n        src={photo_200}\n        size={32}\n        style={{ marginBottom: \"8px\", marginRight: \"8px\" }}\n      />\n    </body>\n  );\n};\n\nconst ModalChat = ({\n  modal,\n  setModal,\n  socket,\n  text,\n  setText,\n  platformSign,\n  info,\n}) => {\n  const platform = usePlatform();\n\n  const [msg, setMsg] = useState([]);\n  const [UPD, setUPD] = useState();\n  const [user, setUser] = useState({});\n  window.text = text;\n  window.user = user;\n\n  useEffect(() => {}, []);\n\n  return (\n    <ModalRoot activeModal={modal}>\n      <ModalPage\n        id=\"info\"\n        onClose={() => setModal(null)}\n        header={\n          <ModalPageHeader\n            left={\n              <body\n                style={{\n                  marginTop: \"145px\",\n                }}\n              >\n                {/*\n                  <PanelHeaderButton>\n                    <Icon24Cancel\n                      onClick={() => {\n                        setModal(null);\n                      }}\n                    />\n                  </PanelHeaderButton>\n                    */}\n\n                <div\n                  style={{\n                    position: \"absolute\",\n                    width: \"100%\",\n                    height: \"100%\",\n                    marginTop: \"150px\",\n                    marginLeft: \"-4px\",\n                    boxShadow:\n                      \"0px -34px 47px -5px rgba(255, 255, 255, 1) inset\",\n                  }}\n                />\n                <img\n                  src={info.src}\n                  height={\"200px\"}\n                  width={window.innerWidth + \"px\"}\n                  style={{\n                    borderRadius: \"16px 16px 0px 0px\",\n                    objectFit: \"cover\",\n                    marginLeft: \"-4px\",\n                  }}\n                />\n              </body>\n            }\n          ></ModalPageHeader>\n        }\n      >\n        <div style={{ height: \"145px\" }} />\n        <Div>\n          <Group>\n            <Title level=\"1\" weight=\"semibold\" style={{ marginBottom: 4 }}>\n              {info.name}\n            </Title>\n            <Headline\n              weight=\"regular\"\n              style={{ marginBottom: 16, color: \"#6d6d6d\" }}\n            >\n              {info.subtitle}\n            </Headline>\n            <Text\n              weight=\"regular\"\n              style={{ marginBottom: 16, fontSize: \"20px\", lineHeight: \"24px\" }}\n            >\n              {info.text}\n            </Text>\n          </Group>\n        </Div>\n      </ModalPage>\n    </ModalRoot>\n  );\n};\n\nexport { ModalChat };\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { AdaptivityProvider, ConfigProvider, AppRoot } from \"@vkontakte/vkui\";\n\nReactDOM.render(\n  <ConfigProvider>\n    <AdaptivityProvider>\n      <AppRoot>\n        <App />\n      </AppRoot>\n    </AdaptivityProvider>\n  </ConfigProvider>,\n  document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}